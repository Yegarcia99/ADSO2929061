<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego de Naves Espaciales</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@700&display=swap" rel="stylesheet">
    <style>
        /* Estilos generales */
        body {
            background: linear-gradient(to bottom, #ff9a5a 0%, #fa7f42 50%, #e25822 100%);
            font-family: 'Space Mono', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
        }

        h1 {
            font-size: 3.5em;
            color: #000;
            text-shadow: 2px 2px 0px #fff;
            margin: 0;
        }

        h2 {
            font-size: 1.5em;
            color: #000;
            text-shadow: 1px 1px 0px #fff;
            margin: 0;
        }
        
        /* Contenedores de las secciones */
        section {
            display: none; /* Ambas secciones ocultas por defecto */
        }
        
        section.active {
            display: block; /* Muestra la sección activa */
        }

        /* ESTILOS DE LA PRIMERA SECCIÓN */
        figure.two {
            background: url(images/fondo2.png) no-repeat center / cover;
            position: relative;
            margin: 0 auto;
            transition: all 0.4s ease-in;
            height: 700px;
            width: 350px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-around;
        }

        img.extra {
            height: 500px;
            bottom: 0;
            left: 0;
            z-index: 0;
        }

        .weapons-selector {
            position: relative;
            height: 60px;
            top: -245px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            padding: 10px 50px;
            z-index: 2;
        }

        .weapons-selector img.nave-display {
            position: relative;
            top: auto;
            left: auto;
            max-width: 90%;
            height: 60px;
            z-index: 1;
        }

        button.btn-prev {
            position: static;
            background: url(images/flecha2.svg) no-repeat center;
            width: 30px;
            height: 30px;
            border: 3px solid #b87333;
            border-radius: 50%;
            background-color: #555;
            background-size: contain;
        }

        button.btn-next {
            position: static;
            background: url(images/flecha2.svg) no-repeat center;
            width: 30px;
            height: 30px;
            border: 3px solid #b87333;
            border-radius: 50%;
            background-color: #555;
            background-size: contain;
        }

        button.btn-mode {
            background: none;
            align-items: center;
            justify-self: center;
            position: absolute;
            bottom: 200px;
            left: 50%;
            transform: translateX(-50%);
            width: 140px;
            height: 50px;
            border: 3px solid #b87333;
            border-radius: 50px;
            color: #fff;
            text-transform: uppercase;
            font-weight: bold;
            cursor: pointer;
            background-color: #1e063f;
            transition: all 0.1s ease;
        }

        button.btn-mode:active {
            transform: translate(-50%, 3px);
            box-shadow: 0 2px 0px #6d3ea0;
        }

        /* ESTILOS DE LA SEGUNDA SECCIÓN */
        figure.one {
            background: url(images/Fondo.png) no-repeat center / cover;
            border-radius: 4px;
            border: 4px solid #b7a63c;
            height: 600px;
            overflow: hidden;
            position: relative;
            margin: 0 auto;
            width: 400px;
        }

        .score-display {
            position: absolute;
            top: 20px;
            right: 20px;
            color: #ffd700;
            font-size: 2.5em;
            font-weight: bold;
            text-shadow: 2px 2px 0px #000;
            z-index: 10;
        }

        .health-bar {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 150px;
            height: 20px;
            border: 2px solid #fff;
            border-radius: 10px;
            background-color: #555;
            z-index: 10;
            overflow: hidden;
        }

        .health-fill {
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, #ff0000, #ff8c00);
            transition: width 0.3s ease-in-out;
        }

        /* Estilo del enemigo y la nave del jugador */
        .enemy {
            position: absolute;
            top: 150px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: auto;
            z-index: 5;
            animation: floating 3s ease-in-out infinite;
        }

        @keyframes floating {
            0% { transform: translate(-50%, 0); }
            50% { transform: translate(-50%, -10px); }
            100% { transform: translate(-50%, 0); }
        }

        /* Estilo para la nave del jugador en la segunda sección */
        #player-ship {
            position: absolute;
            bottom: 30px; /* Posición de la nave en la parte inferior */
            left: 140px;
            width: 80px;
            height: auto;
            transition: left 0.2s ease-in;
            z-index: 10;
        }
        
        /* Estilo y animación para los mundos que bajan */
        .world {
            position: absolute;
            width: 80px;
            height: auto;
            z-index: 5;
            animation-timing-function: linear;
            animation-iteration-count: infinite;
            animation-name: moveDown;
        }

        #world-1 {
            left: 20%;
            animation-duration: 8s;
            animation-delay: 0s;
        }

        #world-2 {
            left: 70%;
            animation-duration: 10s;
            animation-delay: -2s;
        }

        #world-3 {
            left: 45%;
            animation-duration: 7s;
            animation-delay: -4s;
        }

        @keyframes moveDown {
            from {
                top: -100px;
            }
            to {
                top: 100%;
            }
        }
    </style>
</head>

<body class="javascript">
    <nav>
        <a href="index.html">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                <path
                    d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z" />
            </svg>
        </a>
    </nav>
    <main>
        <header>
            <h1>Welcome</h1>
            <h2>Description</h2>
        </header>
        <section class="active" id="section-one">
            <figure class="two">
                <img src="images/extra1.png" class="extra" alt="Fondo fijo">
                <div class="weapons-selector">
                    <button class="btn-prev"></button>
                    <img src="images/nave1.svg" class="nave-display" alt="Nave seleccionada">
                    <button class="btn-next"></button>
                </div>
                <button class="btn-mode" id="btn-start">Start</button>
            </figure>
        </section>
        <section id="section-two">
            <figure class="one">
                <span class="score-display">00000</span>
                <div class="health-bar">
                    <div class="health-fill"></div>
                </div>
                <img src="images/nave1.svg" id="player-ship" alt="Nave del jugador">
                <img src="images/mundo1.png" class="world" id="world-1" alt="Mundo">
                <img src="images/mundo2.png" class="world" id="world-2" alt="Mundo">
                <img src="images/mundo3.png" class="world" id="world-3" alt="Mundo">
                </figure>
        </section>
    </main>
    <script>
        const sectionOne = document.getElementById('section-one');
        const sectionTwo = document.getElementById('section-two');
        const btnStart = document.getElementById('btn-start');

        const naveSelectorImage = document.querySelector('.weapons-selector .nave-display');
        const playerShip = document.getElementById('player-ship');
        const btnPrev = document.querySelector('.btn-prev');
        const btnNext = document.querySelector('.btn-next');

        const naves = {
            attrs: [
                { color: 'Red', image: 'images/nave1.svg' },
                { color: 'White', image: 'images/nave2.svg' },
                { color: 'Blue', image: 'images/nave3.svg' },
            ]
        };

        let inx = 0;

        const updateNaveImage = () => {
            naveSelectorImage.src = naves.attrs[inx].image;
            playerShip.src = naves.attrs[inx].image;
        };

        btnNext.addEventListener('click', () => {
            if (inx < naves.attrs.length - 1) {
                inx++;
                updateNaveImage();
                btnPrev.style.opacity = '1';
                btnPrev.style.pointerEvents = 'all';

                if (inx === naves.attrs.length - 1) {
                    btnNext.style.opacity = '0.2';
                    btnNext.style.pointerEvents = 'none';
                }
            }
        });

        btnPrev.addEventListener('click', () => {
            if (inx > 0) {
                inx--;
                updateNaveImage();
                btnNext.style.opacity = '1';
                btnNext.style.pointerEvents = 'all';

                if (inx === 0) {
                    btnPrev.style.opacity = '0.2';
                    btnPrev.style.pointerEvents = 'none';
                }
            }
        });

        let posX = 140;

        btnStart.addEventListener('click', () => {
            sectionOne.classList.remove('active');
            sectionTwo.classList.add('active');
            // Oculta el encabezado en la vista de juego
            document.querySelector('header').style.display = 'none';
        });

        window.addEventListener('keyup', event => {
            if (sectionTwo.classList.contains('active')) {
                const character = playerShip;
                if (event.code === 'ArrowLeft') {
                    if (posX > -60) {
                        posX -= 40;
                        character.style.transform = `translateX(${posX}px)`;
                    } else {
                        posX = 340;
                    }
                    character.style.left = `${posX}px`;
                }

                if (event.code === 'ArrowRight') {
                    if (posX < 340) {
                        posX += 40;
                        character.style.transform = `translateX(${posX}px)`;
                    } else {
                        posX = -60;
                    }
                    character.style.left = `${posX}px`;
                }
            }
        });

        updateNaveImage();
        btnPrev.style.opacity = '0.2';
        btnPrev.style.pointerEvents = 'none';

        // JavaScript para la segunda sección (sin cambios)
        const scoreDisplay = document.querySelector('.score-display');
        const healthFill = document.querySelector('.health-fill');
        const enemy = document.querySelector('.enemy');
        const gameSection = document.querySelector('figure.one');

        let score = 0;
        let health = 100;

        const updateScore = (points) => {
            score += points;
            scoreDisplay.textContent = String(score).padStart(5, '0');
        };

        const updateHealth = (damage) => {
            health -= damage;
            if (health < 0) health = 0;
            healthFill.style.width = health + '%';
            if (health === 0) {
                alert('Game Over!');
            }
        };
    </script>
</body>

</html>